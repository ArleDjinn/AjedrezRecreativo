{% extends "base.html" %}

{% block title %}Inicio – Ajedrez Recreativo{% endblock %}

{% block content %}
  <div class="card hero">
    <div class="eyebrow">Ajedrez Recreativo</div>
    <h1>Entrena, juega y comparte en Temuco.</h1>
    <p>
      Torneos amistosos, clases y actividades abiertas para todas las edades.
      Revisa los próximos eventos e inscríbete en minutos.
    </p>
    <div class="hero-actions">
      <a class="btn btn-primary" href="#eventos">Ver eventos</a>
      <a class="btn" href="{{ url_for('public.home') }}">Calendario completo</a>
    </div>
    <div class="hero-stats">
      <div class="stat">
        <small>Eventos activos</small>
        <strong>{{ events|length }}</strong>
      </div>
      <div class="stat">
        <small>Comunidad</small>
        <strong>Temuco</strong>
      </div>
      <div class="stat">
        <small>Modalidad</small>
        <strong>Presencial</strong>
      </div>
    </div>
  </div>

  <div id="eventos" class="section-header">
    <div class="section-title">
      <div class="eyebrow">Agenda abierta</div>
      <h2>Próximos eventos</h2>
      <p>Inscripciones disponibles para actividades publicadas.</p>
    </div>
  </div>

  {% if events %}
    {% for event in events %}
      <div class="card event-card">
        <div class="row">
          <div class="col">
            <div class="eyebrow">Evento</div>
            <h2 style="margin-bottom:6px;">{{ event.title }}</h2>
            <div class="actions" style="margin-bottom: 8px;">
              <span class="pill">
                {% if event.pricing_mode == "PACKAGE" %}
                  Paquete completo
                {% else %}
                  Por sesión
                {% endif %}
              </span>
              <span class="pill">{{ event.status }}</span>
            </div>
          </div>

          <div class="col" style="display:flex; align-items:flex-start; justify-content:flex-end;">
            <div class="actions">
              <a class="btn btn-primary" href="{{ url_for('public.event_detail', event_id=event.id) }}">
                Ver detalle
              </a>
            </div>
          </div>
        </div>

        <div class="event-meta">
          <div class="meta-item">
            <small>Lugar</small>
            <strong>{{ event.location_name }}</strong>
          </div>
          <div class="meta-item">
            <small>Sesiones</small>
            <strong>{{ event.occurrences|length }}</strong>
          </div>
          <div class="meta-item">
            <small>Precio</small>
            <strong>
              {% if event.pricing_mode == "PACKAGE" %}
                ${{ event.price }}
              {% else %}
                ${{ event.price }}
              {% endif %}
            </strong>
            <small>
              {% if event.pricing_mode == "PACKAGE" %}
                por participante
              {% else %}
                por sesión, por participante
              {% endif %}
            </small>
          </div>
        </div>
      </div>
    {% endfor %}
  {% else %}
    <div class="card">
      <p>No hay eventos disponibles en este momento.</p>
    </div>
  {% endif %}
{% endblock %}
